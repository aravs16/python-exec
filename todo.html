<!DOCTYPE html>

<html>

<head>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


    <script type="text/javascript">

    

        $(document).ready(function () {

            var delete_selected_todo = function(id){

                // alert("Deleting Selected Todo with rowid:"+id);

                // $.get("http://127.0.0.1:1309/deletetodos/"+id, function (data) {
                    
                // });
            };

            $('#todos').on('click','.del_btn', function(event){
             var id = $(this).attr('id');
             delete_selected_todo(id);
            });

            var get_todos = function () {

                $('#todos').html("");

                $.get("http://127.0.0.1:1309/gettodos/", function (data) {
                    var data_json = JSON.parse(data);
                    console.log(data_json);
                    var i;
                    for (i = 0; i < data_json.length; i++) {

                        $('#todos').append("<div>" + data_json[i] + "<button class='del_btn' id='"+data_json[i][0]+"'>X</button></div>");

                    }
                });

            };

            get_todos();

            $('#add_todo').click(function () {

                var user_todo = prompt("Please enter a todo");
                $.get("http://127.0.0.1:1309/addtodo/" + user_todo, function (data) {

                    get_todos();

                });
            });

        });


    </script>

</head>

<body style="padding:0px">

    <div id="header" style="width:95%;background:black;color:white;padding:20px">

        My Todos

    </div>

    <div id="todos">

    </div>
    <br>
    <button id="add_todo">Add Todo</button>

</body>

</html>